# ========================================
# Docker 日志配置文件
# ========================================

# 日志驱动配置
# 使用 JSON 格式便于日志分析和监控

# 应用日志配置
[logging]
driver = json-file
max-size = 10m
max-file = 3
compress = true

# 日志标签
labels = service,version,environment

# 环境变量
environment = NODE_ENV,SERVICE_NAME,VERSION

# 日志轮转配置
[rotation]
# 单个日志文件最大大小
max_size = 10m

# 保留的日志文件数量
max_files = 3

# 是否压缩旧日志文件
compress = true

# 日志保留时间 (天)
retention_days = 7

# 日志格式配置
[format]
# 时间戳格式
timestamp_format = "2006-01-02T15:04:05.000Z07:00"

# 日志级别
levels = ["error", "warn", "info", "debug"]

# 结构化日志字段
fields = ["timestamp", "level", "message", "service", "version", "requestId", "userId"]

# 监控配置
[monitoring]
# 错误日志阈值 (每分钟)
error_threshold = 10

# 警告日志阈值 (每分钟)
warn_threshold = 50

# 日志率阈值 (每秒)
rate_threshold = 100

# 健康检查日志排除
exclude_health_check = true

# 示例 Docker Compose 日志配置
# logging:
#   driver: json-file
#   options:
#     max-size: "10m"
#     max-file: "3"
#     compress: "true"
#     labels: "service,version,environment"