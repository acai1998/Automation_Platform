# 预发布环境配置
# 接近生产环境的配置，用于最终测试和验证

# ================================
# 应用基础配置
# ================================
NODE_ENV=staging
PORT=3000
APP_URL=https://staging-automation-platform.example.com

# ================================
# 数据库配置
# ================================
DB_HOST=staging-db-host.com
DB_PORT=3306
DB_NAME=automation_platform_staging
DB_USER=automation_staging_user
DB_PASSWORD=staging_db_password
DB_POOL_MIN=3
DB_POOL_MAX=10
DB_CONNECTION_TIMEOUT=10000
DB_IDLE_TIMEOUT=60000

# ================================
# Redis 配置
# ================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=staging_redis_password
REDIS_DB=1
REDIS_TTL=1800

# ================================
# JWT 认证配置
# ================================
JWT_SECRET=staging_jwt_secret_key_for_testing_purposes_only
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=3d

# ================================
# Jenkins 集成配置
# ================================
JENKINS_URL=https://staging-jenkins.example.com
JENKINS_USER=automation_staging_user
JENKINS_API_TOKEN=staging_jenkins_api_token
JENKINS_JOB_NAME=automation-test-execution-staging
JENKINS_API_KEY=staging_platform_api_key
JENKINS_JWT_SECRET=staging_jenkins_jwt_secret
JENKINS_SIGNATURE_SECRET=staging_jenkins_signature_secret

# ================================
# 邮件通知配置
# ================================
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_SECURE=false
MAIL_USER=staging@example.com
MAIL_PASS=staging_mail_password
MAIL_FROM=staging@example.com

# ================================
# 文件上传配置
# ================================
UPLOAD_MAX_SIZE=5MB
UPLOAD_ALLOWED_TYPES=pdf,doc,docx,xls,xlsx,txt,csv
UPLOAD_PATH=/opt/automation-platform/staging/uploads

# ================================
# 日志配置
# ================================
LOG_LEVEL=debug
LOG_FILE_PATH=/opt/automation-platform/staging/logs
LOG_MAX_SIZE=50MB
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD

# ================================
# 安全配置
# ================================
CORS_ORIGINS=https://staging-automation-platform.example.com,http://localhost:3000
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=200
SESSION_SECRET=staging_session_secret
BCRYPT_ROUNDS=10

# ================================
# 性能配置
# ================================
CACHE_TTL=180
API_TIMEOUT=30000
DB_QUERY_TIMEOUT=10000
MAX_CONCURRENT_EXECUTIONS=5

# ================================
# 监控配置
# ================================
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30000
PROMETHEUS_ENABLED=true

# ================================
# 备份配置
# ================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=/opt/automation-platform/staging/backups

# ================================
# 功能开关
# ================================
ENABLE_USER_REGISTRATION=true
ENABLE_EMAIL_VERIFICATION=false
ENABLE_TWO_FACTOR_AUTH=false
ENABLE_AUDIT_LOG=true
ENABLE_API_DOCS=true

# ================================
# 第三方服务配置
# ================================
# 钉钉通知（测试）
DINGTALK_WEBHOOK_URL=https://oapi.dingtalk.com/robot/send?access_token=staging_token
DINGTALK_SECRET=staging_dingtalk_secret

# 企业微信通知（测试）
WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=staging_key

# Slack 通知（测试）
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/staging/slack/webhook

# ================================
# Docker 相关配置
# ================================
DOCKER_REGISTRY=staging-registry.example.com
APP_NAME=automation-platform
BUILD_VERSION=staging-latest
COMPOSE_PROJECT_NAME=automation-platform-staging

# ================================
# SSL/TLS 配置
# ================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/nginx/certs/staging/automation-platform.crt
SSL_KEY_PATH=/etc/nginx/certs/staging/automation-platform.key
SSL_PROTOCOLS=TLSv1.2 TLSv1.3

# ================================
# 高可用配置
# ================================
CLUSTER_ENABLED=false
CLUSTER_NODES=staging-node1.example.com
LOAD_BALANCER_URL=https://staging-lb.automation-platform.example.com

# ================================
# 数据同步配置
# ================================
SYNC_ENABLED=true
SYNC_INTERVAL=600000
SYNC_BATCH_SIZE=500
REMOTE_API_URL=https://staging-api.example.com
REMOTE_API_KEY=staging_remote_api_key

# ================================
# 错误追踪配置
# ================================
SENTRY_DSN=https://staging-sentry-dsn@sentry.io/staging-project-id
SENTRY_ENVIRONMENT=staging
SENTRY_RELEASE=staging-1.0.0

# ================================
# 国际化配置
# ================================
DEFAULT_LOCALE=zh-CN
SUPPORTED_LOCALES=zh-CN,en-US
TIMEZONE=Asia/Shanghai

# ================================
# 开发工具配置（预发布环境可启用）
# ================================
DEBUG_MODE=true
ENABLE_SWAGGER=true
ENABLE_GRAPHQL_PLAYGROUND=true
ENABLE_ADMIN_PANEL=true

# ================================
# 测试相关配置
# ================================
ENABLE_PERFORMANCE_TESTING=true
ENABLE_LOAD_TESTING=true
TEST_DATA_GENERATION=true
MOCK_EXTERNAL_SERVICES=true

# ================================
# Grafana 配置
# ================================
GRAFANA_ADMIN_PASSWORD=staging123