# CLAUDE.md

æœ¬æ–‡ä»¶ä¸º Claude Codeï¼ˆclaude.ai/codeï¼‰åœ¨å¤„ç†æœ¬ä»£ç ä»“åº“ä¸­çš„ä»£ç æ—¶æä¾›æŒ‡å¯¼ã€‚

## å¼€å‘å‘½ä»¤

```bash
# åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯
npm run start

# ä»…å¯åŠ¨å‰ç«¯ï¼ˆVite å¼€å‘æœåŠ¡å™¨ï¼Œç«¯å£ 5173ï¼‰
npm run dev

# ä»…å¯åŠ¨åç«¯ï¼ˆExpress æœåŠ¡ï¼Œç«¯å£ 3000ï¼Œæ”¯æŒçƒ­é‡è½½ï¼‰
npm run server

# æ„å»ºç”Ÿäº§ç¯å¢ƒçš„å‰ç«¯ä»£ç 
npm run build

# æ•°æ®åº“ç®¡ç†
npm run db:init    # ä½¿ç”¨ schema å’Œç§å­æ•°æ®åˆå§‹åŒ–æ•°æ®åº“
npm run db:reset   # é‡ç½®æ•°æ®åº“ï¼ˆåˆ é™¤å¹¶é‡æ–°åˆ›å»ºï¼‰
```

## ç±»å‹æ£€æŸ¥

```bash
# å‰ç«¯ï¼ˆReact/Viteï¼‰
npx tsc --noEmit -p tsconfig.json

# åç«¯ï¼ˆExpress/Nodeï¼‰
npx tsc --noEmit -p tsconfig.server.json
```

## æ¶æ„è¯´æ˜

è¿™æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ã€è°ƒåº¦æ‰§è¡Œä»»åŠ¡ã€å±•ç¤ºæµ‹è¯•æŠ¥å‘Šçš„å…¨æ ˆè‡ªåŠ¨åŒ–æµ‹è¯•å¹³å°ã€‚
**æ³¨æ„**ï¼šå®é™…æµ‹è¯•æ‰§è¡Œç”± Jenkins ç­‰å¤–éƒ¨ç³»ç»Ÿå®Œæˆï¼Œå¹³å°ä¸“æ³¨äºç®¡ç†å’Œè°ƒåº¦ã€‚

### å‰ç«¯ï¼ˆ`src/`ï¼‰
- ä½¿ç”¨ React 18 ä¸ TypeScriptï¼ŒåŸºäº Vite æ„å»º
- æ ·å¼ï¼šTailwindCSS + shadcn/ui ç»„ä»¶ï¼ˆä½äº `src/components/ui/`ï¼‰
- è·¯ç”±ï¼šwouterï¼ˆè½»é‡çº§ React è·¯ç”±å™¨ï¼‰
- çŠ¶æ€ç®¡ç†ï¼šTanStack Queryï¼ˆç”¨äºæœåŠ¡ç«¯çŠ¶æ€ï¼‰
- è·¯å¾„åˆ«åï¼š`@/*` æ˜ å°„åˆ° `src/*`

### åç«¯ï¼ˆ`server/`ï¼‰
- é€šè¿‡ tsx è¿è¡Œçš„ Express æœåŠ¡å™¨
- ä½¿ç”¨ better-sqlite3 çš„ SQLite æ•°æ®åº“
- æ•°æ®åº“æ–‡ä»¶ä½äº `server/db/`ï¼ˆåŒ…æ‹¬ schema.sqlã€seed.sql å’Œ autotest.dbï¼‰
- è·¯å¾„åˆ«åï¼š`@shared/*` æ˜ å°„åˆ° `shared/*`

### API è·¯ç”±
- `/api/dashboard` - ä»ªè¡¨ç›˜ç»Ÿè®¡æ•°æ®
- `/api/executions` - æµ‹è¯•æ‰§è¡Œè®°å½•
- `/api/cases` - æµ‹è¯•ç”¨ä¾‹ç®¡ç†
- `/api/tasks` - æµ‹è¯•ä»»åŠ¡ç®¡ç†
- `/api/jenkins` - Jenkins é›†æˆï¼ˆè§¦å‘æ‰§è¡Œã€è·å–ç”¨ä¾‹ï¼‰
- `/api/health` - å¥åº·æ£€æŸ¥ç«¯ç‚¹

### Jenkins é›†æˆ
å¹³å°é€šè¿‡ API ä¸ Jenkins é›†æˆï¼š
- `POST /api/jenkins/trigger` â€” åˆ›å»ºæ‰§è¡Œè®°å½•ï¼Œè§¦å‘ Jenkins Job
- `GET /api/jenkins/tasks/:id/cases` â€” è·å–ä»»åŠ¡å…³è”çš„ç”¨ä¾‹åˆ—è¡¨
- `POST /api/executions/callback` â€” Jenkins æ‰§è¡Œå®Œæˆåå›è°ƒä¸ŠæŠ¥ç»“æœ
- `POST /api/executions/:id/start` â€” æ ‡è®°æ‰§è¡Œå¼€å§‹è¿è¡Œ

## æ•°æ®åº“ç»“æ„

å…³é”®è¡¨å®šä¹‰ä½äº `server/db/schema.sql`ï¼š
- `test_cases` â€” æµ‹è¯•ç”¨ä¾‹å®šä¹‰ï¼ˆå«é…ç½® JSONï¼‰
- `tasks` â€” å®šæ—¶æˆ–æ‰‹åŠ¨è§¦å‘çš„æµ‹è¯•ä»»åŠ¡
- `task_executions` â€” æ‰§è¡Œå†å²è®°å½•
- `case_results` â€” å•ä¸ªæµ‹è¯•ç»“æœ
- `daily_summaries` â€” æ±‡æ€»ç»Ÿè®¡ä¿¡æ¯

## è·¯å¾„åˆ«åé…ç½®

åœ¨ `tsconfig.json` ä¸­é…ç½®å¦‚ä¸‹ï¼š
- `@/*` â†’ `./src/*`ï¼ˆå‰ç«¯ï¼‰
- `@shared/*` â†’ `./shared/*`ï¼ˆå…±äº«ç±»å‹ï¼‰
- `@configs/*` â†’ `./configs/*`ï¼ˆé…ç½®æ–‡ä»¶ï¼‰

## é¡¹ç›®ç›®å½•ç»“æ„

```text
â”œâ”€â”€ src/           # å‰ç«¯æºä»£ç ï¼ˆReactï¼‰
â”œâ”€â”€ server/        # åç«¯æºä»£ç ï¼ˆExpressï¼‰
â”œâ”€â”€ configs/       # é…ç½®æ–‡ä»¶ï¼ˆtailwind, postcssï¼‰
â”œâ”€â”€ tests/         # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ scripts/       # å·¥å…·è„šæœ¬
â”œâ”€â”€ docs/          # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ shared/        # å…±äº«ç±»å‹å®šä¹‰
â”œâ”€â”€ public/        # é™æ€èµ„æº
â”œâ”€â”€ .aiconfig/     # AI é‡æ„é…ç½®å’Œå†å²
â”œâ”€â”€ archive/       # å½’æ¡£æ–‡ä»¶ï¼ˆä¸è¦ä½¿ç”¨ï¼‰
â””â”€â”€ tmp/           # ä¸´æ—¶æ–‡ä»¶ï¼ˆå·²å¿½ç•¥ï¼‰
```

## **è¯·ä¸¥æ ¼éµå®ˆä»¥ä¸‹è§„åˆ™ï¼Œå½“ç”Ÿæˆä»£ç æ—¶ï¼š**

## ä»£ç è§„èŒƒ
- **å°½å¯èƒ½å‡å°‘è‡ªè¡Œå®ç°çš„åº•å±‚ä¸é€šç”¨é€»è¾‘ï¼Œä¼˜å…ˆã€ç›´æ¥ã€å®Œæ•´åœ°å¤ç”¨æ—¢æœ‰æˆç†Ÿä»“åº“ä¸åº“ä»£ç ï¼Œä»…åœ¨å¿…è¦æ—¶ç¼–å†™æœ€å°ä¸šåŠ¡å±‚ä¸è°ƒåº¦ä»£ç **
- âœ… **å¿…é¡»ç”¨ TypeScript**ï¼Œç¦æ­¢ `any` ç±»å‹ï¼ˆç”¨ `unknown` æˆ–å…·ä½“ç±»å‹æ›¿ä»£ï¼‰
- âœ… **è·¯å¾„åˆ«åå¿…é¡»ä½¿ç”¨**ï¼š  
  `@/*` â†’ `src/*`ï¼ˆå‰ç«¯ï¼‰  
  `@shared/*` â†’ `shared/*`ï¼ˆå…±äº«ç±»å‹ï¼‰
- âœ… **React ç»„ä»¶**ï¼šå¿…é¡»ç”¨å‡½æ•°ç»„ä»¶ + hooksï¼Œæ–‡ä»¶åä¸ç»„ä»¶åä¸€è‡´ï¼ˆå¦‚ `Button.tsx`ï¼‰

## é¡¹ç›®ç»“æ„
- ğŸš€ **å‰ç«¯ä»£ç **ï¼šä»…åœ¨ `src/` ç›®å½•ä¸‹ä¿®æ”¹ï¼ˆVite + React 18 + Tailwindï¼‰
- ğŸš€ **åç«¯ä»£ç **ï¼šä»…åœ¨ `server/` ç›®å½•ä¸‹ä¿®æ”¹ï¼ˆExpress + TypeScriptï¼‰
- âŒ **ç¦æ­¢**åœ¨ `src/` å†™åç«¯é€»è¾‘ï¼Œæˆ–åœ¨ `server/` å†™å‰ç«¯ç»„ä»¶

## å…³é”®åŠŸèƒ½å®ç°
- ğŸ”¥ **Jenkins é›†æˆ**ï¼š
  é€šè¿‡ `executionService.createExecution()` åˆ›å»ºæ‰§è¡Œè®°å½•ï¼ŒJenkins å®Œæˆåè°ƒç”¨å›è°ƒæ¥å£
- ğŸ”¥ **æ•°æ®åº“æ“ä½œ**ï¼š
  é€šè¿‡ `server/db` ä¸­çš„ `better-sqlite3` æ“ä½œï¼Œ**ç¦æ­¢**åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  SQL
- ğŸ”¥ **API è·¯ç”±**ï¼š
  ä¸¥æ ¼æŒ‰ `API Routes` éƒ¨åˆ†å®šä¹‰ï¼ˆå¦‚ `/api/cases` ç”¨äºæµ‹è¯•ç”¨ä¾‹ç®¡ç†ï¼‰

## é‡è¦æç¤º
- âš ï¸ **ä¸è¦ä¿®æ”¹** `tsconfig.json` ä¸­çš„è·¯å¾„åˆ«åï¼ˆå·²é…ç½®å¥½ï¼‰
- âš ï¸ **ä¸è¦æ·»åŠ ** `node_modules` æˆ– `dist/` æ–‡ä»¶åˆ°ç‰ˆæœ¬æ§åˆ¶
- âš ï¸ **æ‰€æœ‰æ–°æ–‡ä»¶**å¿…é¡»æ”¾åœ¨å¯¹åº”ç›®å½•ï¼ˆå¦‚æ–°ç»„ä»¶æ”¾ `src/components/`ï¼‰
